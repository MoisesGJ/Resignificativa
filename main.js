document.addEventListener("DOMContentLoaded", () => { let e = document.getElementById("mobile-menu-button"), t = document.getElementById("mobile-menu"); if (e.addEventListener("click", () => t.classList.toggle("view")), t.querySelectorAll("a").forEach(e => e.addEventListener("click", () => t.classList.remove("view"))), !window.matchMedia("(min-width: 768px)").matches) return; let i = document.querySelectorAll(".nav-link"), o = Array.from(document.querySelectorAll("section[id], header[id], footer[id]")); function n() { let e = window.scrollY + window.innerHeight / 2, t = o[0].id; for (let n of o) n.offsetTop <= e && (t = n.id); i.forEach(e => { e.dataset.target === t ? e.classList.add("text-yellow-400", "font-semibold") : e.classList.remove("text-yellow-400", "font-semibold") }) } i.forEach(e => { e.addEventListener("click", t => { t.preventDefault(); let i = e.dataset.target, o = document.getElementById(i); if (!o) return; let n = o.offsetTop - (window.innerHeight - o.offsetHeight) / 2; window.scrollTo({ top: Math.max(0, n), behavior: "smooth" }) }) }), n(), window.addEventListener("scroll", n) }); const btn = document.getElementById("subscribe-button"), input = document.getElementById("email-input"), msg = document.getElementById("subscription-message"); function showTempMessage(e) { msg.textContent = e, setTimeout(() => msg.textContent = "", 3e3) } async function fetchIPAndLocation() { try { let e = await fetch("https://ipapi.co/json/"); if (!e.ok) throw Error(); let t = await e.json(); return { ip: t.ip, location: `${t.city}, ${t.region}, ${t.country_name}` } } catch { return { ip: "desconocida", location: "desconocida" } } } btn.addEventListener("click", async () => { if (!input.checkValidity()) { showTempMessage("Por favor ingresa un correo v\xe1lido."); return } btn.disabled = !0, showTempMessage("Enviandoâ€¦"); let e = input.value.trim(), t = new Date, i = t.toLocaleDateString("es-MX", { timeZone: "America/Mexico_City", day: "2-digit", month: "2-digit", year: "numeric" }), o = t.toLocaleTimeString("es-MX", { timeZone: "America/Mexico_City", hour: "2-digit", minute: "2-digit", hour12: !1 }), { ip: n, location: s } = await fetchIPAndLocation(); try { let a = await fetch("https://resignificativa-default-rtdb.firebaseio.com/subscribers.json", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ email: e, fecha: i, hora: o, ip: n, location: s }) }); if (!a.ok) throw Error(`${a.status} ${a.statusText}`); showTempMessage("Correo recibido. \xa1Gracias por suscribirte!"), input.value = "" } catch (r) { console.error(r), showTempMessage("Error al suscribir. Intenta de nuevo.") } finally { btn.disabled = !1 } });